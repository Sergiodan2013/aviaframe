# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Aviaframe Portal

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤ ‚úÖ
- –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `AirportAutocomplete` —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö 80+ –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∏—Å–∫–∞ –Ω–∞ **—Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö**
- –ü–æ–∏—Å–∫ –ø–æ:
  - IATA –∫–æ–¥—É (MOW, LED, DXB)
  - –ù–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞ (Moscow, –ú–æ—Å–∫–≤–∞, Dubai, –î—É–±–∞–π)
  - –ù–∞–∑–≤–∞–Ω–∏—é –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞ (Sheremetyevo, Domodedovo)
  - –°—Ç—Ä–∞–Ω–µ

### 2. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ üîç
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ payload, URL, —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–≤–µ—Ç–∞
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ n8n –∑–∞–ø—É—â–µ–Ω
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
docker ps | grep n8n
# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ: http://localhost:5678
```

### 2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow "DRCT Search"
- –û—Ç–∫—Ä–æ–π—Ç–µ n8n: http://localhost:5678
- –ù–∞–π–¥–∏—Ç–µ workflow "DRCT Search Workflow"
- –ù–∞–∂–º–∏—Ç–µ "Active" (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω)

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- URL: http://localhost:3002/
- –û—Ç–∫—Ä–æ–π—Ç–µ **Developer Console** (F12 –∏–ª–∏ Cmd+Option+I)
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**

### 4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∏—Å–∫

#### –¢–µ—Å—Ç 1: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤
1. –ö–ª–∏–∫–Ω–∏—Ç–µ –≤ –ø–æ–ª–µ "From"
2. –ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å: **"–º–æ—Å–∫"** –∏–ª–∏ **"mos"**
3. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è dropdown —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏:
   - MOW - Moscow (–ú–æ—Å–∫–≤–∞) - All Airports
   - DME - Moscow (–ú–æ—Å–∫–≤–∞) - Domodedovo
   - SVO - Moscow (–ú–æ—Å–∫–≤–∞) - Sheremetyevo
   - VKO - Moscow (–ú–æ—Å–∫–≤–∞) - Vnukovo

4. –í—ã–±–µ—Ä–∏—Ç–µ **MOW** (Moscow All Airports)

5. –í –ø–æ–ª–µ "To" –≤–≤–µ–¥–∏—Ç–µ: **"–ø–∏—Ç–µ—Ä"** –∏–ª–∏ **"led"**
6. –í—ã–±–µ—Ä–∏—Ç–µ **LED** (St. Petersburg)

#### –¢–µ—Å—Ç 2: –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤
1. **From**: MOW
2. **To**: LED
3. **Departure Date**: –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É —á–µ—Ä–µ–∑ 7-10 –¥–Ω–µ–π –æ—Ç —Å–µ–≥–æ–¥–Ω—è
4. **Adults**: 1
5. –ù–∞–∂–º–∏—Ç–µ **"Search Flights"**

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```javascript
=== Flight Search Started ===
Search payload: {
  "origin": "MOW",
  "destination": "LED",
  "depart_date": "2026-02-05",
  "adults": 1,
  "children": 0,
  "infants": 0,
  "cabin_class": "economy"
}
Target URL: http://localhost:5678/webhook/drct/search
Response status: 200
Response data: {
  "search_id": "...",
  "offers": [...],
  "metadata": {...}
}
```

### 6. –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- ‚úÖ –í—ã —É–≤–∏–¥–∏—Ç–µ "Search Results" —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–π—Å–æ–≤ —Å —Ü–µ–Ω–∞–º–∏, –≤—Ä–µ–º–µ–Ω–µ–º, –º–∞—Ä—à—Ä—É—Ç–æ–º
- ‚úÖ –ò–ª–∏ "No flights found" –µ—Å–ª–∏ DRCT API –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

#### –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:
- ‚ùå "Failed to search flights" - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ n8n –∑–∞–ø—É—â–µ–Ω
- ‚ùå "404" - workflow –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ n8n
- ‚ùå "Network Error" - –ø—Ä–æ–±–ª–µ–º–∞ —Å proxy –∏–ª–∏ CORS

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ü—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
DRCT Sandbox API –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `offers: []` –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –≠—Ç–æ **–ù–û–†–ú–ê–õ–¨–ù–û**.
Workflow —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ—Å–ª–∏:
- –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ 200
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞: `{ search_id, offers: [], metadata }`
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–π—Å—ã
–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π DRCT API key (–Ω–µ sandbox)
2. –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ URL –≤ `.env`:
   ```
   VITE_N8N_SEARCH_URL=http://localhost:5678/webhook/drct/search
   ```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö:

| –í–≤–æ–¥ | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|------|---------------------|
| "–¥—É–±–∞–π" | DXB - Dubai (–î—É–±–∞–π) |
| "dubai" | DXB - Dubai (–î—É–±–∞–π) |
| "london" | LHR - London (–õ–æ–Ω–¥–æ–Ω) - Heathrow |
| "–ª–æ–Ω–¥–æ–Ω" | LHR - London (–õ–æ–Ω–¥–æ–Ω) - Heathrow |
| "paris" | CDG - Paris (–ü–∞—Ä–∏–∂) - Charles de Gaulle |
| "–ø–∞—Ä–∏–∂" | CDG - Paris (–ü–∞—Ä–∏–∂) - Charles de Gaulle |

### Keyboard Navigation
- ‚¨ÜÔ∏è / ‚¨áÔ∏è - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–ø–∏—Å–∫—É
- Enter - –í—ã–±–æ—Ä –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞
- Esc - –ó–∞–∫—Ä—ã—Ç—å dropdown
- –ö–ª–∏–∫ –≤–Ω–µ dropdown - –ó–∞–∫—Ä—ã—Ç—å

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª `/src/data/airports.js` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: Ctrl+C –∏ `npm run dev`

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to search flights"
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ n8n –∑–∞–ø—É—â–µ–Ω: `curl http://localhost:5678/webhook/drct/search`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ workflow –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- –û—Ç–∫—Ä–æ–π—Ç–µ n8n –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ execution logs

### –ü—Ä–æ–±–ª–µ–º–∞: CORS errors
**–†–µ—à–µ–Ω–∏–µ**:
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ vite.config.js —Å–æ–¥–µ—Ä–∂–∏—Ç proxy –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL: `/webhook/drct/search` –≤–º–µ—Å—Ç–æ `http://localhost:5678/webhook/drct/search`

## Debug Checklist

- [ ] n8n –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ :5678
- [ ] DRCT Search workflow –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- [ ] Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ :3002
- [ ] Browser console –æ—Ç–∫—Ä—ã—Ç–∞ (F12)
- [ ] –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞—ç—Ä–æ–ø–æ—Ä—Ç—ã
- [ ] –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ JS
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–µ–Ω "=== Flight Search Started ==="
- [ ] –ü–æ–ª—É—á–µ–Ω response status 200
- [ ] Response —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ "offers"
